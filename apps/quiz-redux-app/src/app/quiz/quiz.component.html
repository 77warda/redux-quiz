<section *ngIf="quizQuestions$ | async as quizQuestions">
  <div class="side-btn">
    <button (click)="openSideWindow()">
      <i class="fa fa-angle-right"></i>
    </button>
  </div>
  <div (click)="closeSideWindow()">
    <div *ngIf="sideWindowVisible" class="side-window-container">
      <div class="side-window" (click)="$event.stopPropagation()">
        <div
          *ngFor="let question of quizQuestions.questions; let i = index"
          class="window-flex"
        >
          <h3 (click)="setCurrentQuestion(i)">
            {{ question.question.text }}
          </h3>
          <div class="attempted-question">
            <i class="fa fa-check-circle"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="nav" *ngIf="quizQuestions$ | async as quizQuestions">
    <div class="navbar">
      <button
        class="icon-button"
        (click)="previousQuestion()"
        [disabled]="quizQuestions.currentQuestionNumber === 1"
      >
        <i class="fa fa-angle-left"></i>
      </button>
      <button class="ques-btn">
        Question {{ quizQuestions.currentQuestionNumber }}/{{
          quizQuestions.totalQuestions
        }}
      </button>
      <button class="icon-button" (click)="nextQuestion()">
        <i class="fa fa-angle-right"></i>
      </button>

      <button class="option-panel" (click)="toggleOptionWindow()">
        <i class="fas fa-check-square"></i>
      </button>

      <div class="timer">{{ uiTimer }}</div>
    </div>
  </div>
  <div class="container">
    <div class="quiz-flex">
      <h3>
        {{ (selectCurrentQuestion$ | async)?.question?.text }}
      </h3>
      <ul>
        <li *ngFor="let option of quizQuestions.options; let i = index">
          {{ option }}
        </li>
      </ul>
    </div>
  </div>
  <div *ngIf="optionWindowVisible" class="option-window">
    <div class="radio-btns">
      <div *ngFor="let option of quizQuestions.options; let i = index">
        <input
          type="radio"
          type="radio"
          name="options"
          id="{{ 'option' + i }}"
          (click)="handleOption(option)"
          [disabled]="quizQuestions.response"
        />
        <label
          [ngClass]="{
            correct:
              quizQuestions.response && option === quizQuestions.correctAnswer,
            inCorrect:
              quizQuestions.response &&
              quizQuestions.response !== quizQuestions.correctAnswer
                ? option === quizQuestions.response
                : null
          }"
          for=""
          >{{ option }}</label
        >
      </div>
      <div class="btn-flex">
        <button
          class="next-btn"
          (click)="previousQuestion()"
          [disabled]="quizQuestions.currentQuestionNumber === 1"
        >
          Previous
        </button>
        <button class="next-btn" (click)="nextQuestion()">
          {{
            quizQuestions.currentQuestionNumber < quizQuestions.totalQuestions
              ? 'Next'
              : 'Finish'
          }}
        </button>
      </div>
    </div>
  </div>
</section>
