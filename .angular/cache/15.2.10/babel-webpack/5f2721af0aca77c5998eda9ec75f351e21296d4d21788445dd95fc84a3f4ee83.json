{"ast":null,"code":"import { createReducer, on } from '@ngrx/store';\nimport * as QuizActions from './quiz-app.actions';\nexport const QUIZ_APP_FEATURE_KEY = 'quizApp';\nexport const initialState = {\n  totalQuestions: 0,\n  current_score: 0,\n  total_score: 0,\n  questions: [],\n  options: [],\n  currentQuestion: '',\n  current_Question_Index: 0\n  // selectedOption: null, // Add this line\n  // isOptionSelected: false, // Add this line\n  // selectedOptionClass: null, // Add this line\n  // correctAnswerClass: null, // Add this line\n};\n\nexport const quizAppReducer = createReducer(initialState, on(QuizActions.loadQuestionsSuccess, (state, {\n  questions\n}) => ({\n  ...state,\n  questions\n})), on(QuizActions.selectOption, (state, {\n  option\n}) => ({\n  ...state,\n  selectedOption: option,\n  isOptionSelected: true,\n  selectedOptionClass: state.questions[state.current_Question_Index].correctAnswer === option ? 'correct-answer' : 'incorrect-answer',\n  correctAnswerClass: 'correct-answer'\n})), on(QuizActions.setCurrentQuestion, (state, {\n  index\n}) => {\n  return {\n    ...state,\n    current_Question_Index: index - 1,\n    currentQuestion: state.questions[index - 1].question,\n    options: state.questions[index - 1].options\n  };\n}),\n// Modify the nextQuestion action\non(QuizActions.nextQuestion, state => {\n  const nextIndex = state.current_Question_Index + 1;\n  // Check if there is a next question\n  if (nextIndex < state.totalQuestions) {\n    const newState = {\n      ...state,\n      current_Question_Index: nextIndex,\n      currentQuestion: state.questions[nextIndex].question,\n      options: state.questions[nextIndex].options // Adjust the indexing\n    };\n\n    return newState;\n  } else {\n    // Handle the case when there are no more questions\n    return state;\n  }\n}), on(QuizActions.restartQuiz, () => initialState));","map":{"version":3,"mappings":"AACA,SAASA,aAAa,EAAEC,EAAE,QAAQ,aAAa;AAE/C,OAAO,KAAKC,WAAW,MAAM,oBAAoB;AAIjD,OAAO,MAAMC,oBAAoB,GAAG,SAAS;AAE7C,OAAO,MAAMC,YAAY,GAAS;EAChCC,cAAc,EAAE,CAAC;EACjBC,aAAa,EAAE,CAAC;EAChBC,WAAW,EAAE,CAAC;EACdC,SAAS,EAAE,EAAE;EACbC,OAAO,EAAE,EAAE;EACXC,eAAe,EAAE,EAAE;EACnBC,sBAAsB,EAAE;EACxB;EACA;EACA;EACA;CACD;;AAED,OAAO,MAAMC,cAAc,GAAGZ,aAAa,CACzCI,YAAY,EACZH,EAAE,CAACC,WAAW,CAACW,oBAAoB,EAAE,CAACC,KAAK,EAAE;EAAEN;AAAS,CAAE,MAAM;EAC9D,GAAGM,KAAK;EACRN;CACD,CAAC,CAAC,EAEHP,EAAE,CAACC,WAAW,CAACa,YAAY,EAAE,CAACD,KAAK,EAAE;EAAEE;AAAM,CAAE,MAAM;EACnD,GAAGF,KAAK;EACRG,cAAc,EAAED,MAAM;EACtBE,gBAAgB,EAAE,IAAI;EACtBC,mBAAmB,EACjBL,KAAK,CAACN,SAAS,CAACM,KAAK,CAACH,sBAAsB,CAAC,CAACS,aAAa,KAAKJ,MAAM,GAClE,gBAAgB,GAChB,kBAAkB;EACxBK,kBAAkB,EAAE;CACrB,CAAC,CAAC,EAEHpB,EAAE,CAACC,WAAW,CAACoB,kBAAkB,EAAE,CAACR,KAAK,EAAE;EAAES;AAAK,CAAE,KAAI;EACtD,OAAO;IACL,GAAGT,KAAK;IACRH,sBAAsB,EAAEY,KAAK,GAAG,CAAC;IACjCb,eAAe,EAAEI,KAAK,CAACN,SAAS,CAACe,KAAK,GAAG,CAAC,CAAC,CAACC,QAAQ;IACpDf,OAAO,EAAEK,KAAK,CAACN,SAAS,CAACe,KAAK,GAAG,CAAC,CAAC,CAACd;GACrC;AACH,CAAC,CAAC;AAEF;AACAR,EAAE,CAACC,WAAW,CAACuB,YAAY,EAAGX,KAAK,IAAI;EACrC,MAAMY,SAAS,GAAGZ,KAAK,CAACH,sBAAsB,GAAG,CAAC;EAElD;EACA,IAAIe,SAAS,GAAGZ,KAAK,CAACT,cAAc,EAAE;IACpC,MAAMsB,QAAQ,GAAG;MACf,GAAGb,KAAK;MACRH,sBAAsB,EAAEe,SAAS;MACjChB,eAAe,EAAEI,KAAK,CAACN,SAAS,CAACkB,SAAS,CAAC,CAACF,QAAQ;MACpDf,OAAO,EAAEK,KAAK,CAACN,SAAS,CAACkB,SAAS,CAAC,CAACjB,OAAO,CAAE;KAC9C;;IACD,OAAOkB,QAAQ;GAChB,MAAM;IACL;IACA,OAAOb,KAAK;;AAEhB,CAAC,CAAC,EAEFb,EAAE,CAACC,WAAW,CAAC0B,WAAW,EAAE,MAAMxB,YAAY,CAAC,CAChD","names":["createReducer","on","QuizActions","QUIZ_APP_FEATURE_KEY","initialState","totalQuestions","current_score","total_score","questions","options","currentQuestion","current_Question_Index","quizAppReducer","loadQuestionsSuccess","state","selectOption","option","selectedOption","isOptionSelected","selectedOptionClass","correctAnswer","correctAnswerClass","setCurrentQuestion","index","question","nextQuestion","nextIndex","newState","restartQuiz"],"sourceRoot":"","sources":["/Users/macbookpro/OneSchool/Angular apps/quiz-app/apps/quiz-redux-app/src/app/+state/quiz-app.reducer.ts"],"sourcesContent":["import { EntityState, EntityAdapter, createEntityAdapter } from '@ngrx/entity';\nimport { createReducer, on } from '@ngrx/store';\n\nimport * as QuizActions from './quiz-app.actions';\nimport { QuizAppEntity } from './quiz-app.models';\nimport { Quiz } from '../quiz/quiz.interface';\n\nexport const QUIZ_APP_FEATURE_KEY = 'quizApp';\n\nexport const initialState: Quiz = {\n  totalQuestions: 0,\n  current_score: 0,\n  total_score: 0,\n  questions: [],\n  options: [],\n  currentQuestion: '',\n  current_Question_Index: 0,\n  // selectedOption: null, // Add this line\n  // isOptionSelected: false, // Add this line\n  // selectedOptionClass: null, // Add this line\n  // correctAnswerClass: null, // Add this line\n};\n\nexport const quizAppReducer = createReducer(\n  initialState,\n  on(QuizActions.loadQuestionsSuccess, (state, { questions }) => ({\n    ...state,\n    questions,\n  })),\n\n  on(QuizActions.selectOption, (state, { option }) => ({\n    ...state,\n    selectedOption: option,\n    isOptionSelected: true,\n    selectedOptionClass:\n      state.questions[state.current_Question_Index].correctAnswer === option\n        ? 'correct-answer'\n        : 'incorrect-answer',\n    correctAnswerClass: 'correct-answer',\n  })),\n\n  on(QuizActions.setCurrentQuestion, (state, { index }) => {\n    return {\n      ...state,\n      current_Question_Index: index - 1, // Adjust the indexing\n      currentQuestion: state.questions[index - 1].question,\n      options: state.questions[index - 1].options,\n    };\n  }),\n\n  // Modify the nextQuestion action\n  on(QuizActions.nextQuestion, (state) => {\n    const nextIndex = state.current_Question_Index + 1;\n\n    // Check if there is a next question\n    if (nextIndex < state.totalQuestions) {\n      const newState = {\n        ...state,\n        current_Question_Index: nextIndex,\n        currentQuestion: state.questions[nextIndex].question, // Adjust the indexing\n        options: state.questions[nextIndex].options, // Adjust the indexing\n      };\n      return newState;\n    } else {\n      // Handle the case when there are no more questions\n      return state;\n    }\n  }),\n\n  on(QuizActions.restartQuiz, () => initialState)\n);\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}