{"ast":null,"code":"import { createReducer, on } from '@ngrx/store';\nimport { QuizActions } from './quiz-app.actions';\nimport { QuizApiActions } from './quiz-app.actions';\nexport const QUIZ_APP_FEATURE_KEY = 'quizApp';\nexport const initialState = {\n  totalQuestions: 0,\n  current_score: 0,\n  total_score: 0,\n  questions: [],\n  options: [],\n  currentQuestion: '',\n  current_Question_Index: 0,\n  selectedOption: '',\n  isOptionSelected: false,\n  selectedOptionClass: '',\n  correctAnswerClass: '',\n  userResponses: [],\n  isFirstQuestion$: false,\n  correctAnswer: '',\n  categories: {},\n  selectedNumberOfQuestions: 0,\n  selectedCategory: '',\n  selectedDifficulty: ''\n};\nexport const quizAppReducer = createReducer(initialState, on(QuizApiActions.loadQuestionsSuccess, (state, {\n  questions\n}) => ({\n  ...state,\n  questions: questions,\n  totalQuestions: questions.length,\n  currentQuestion: questions[state.current_Question_Index].question.text,\n  options: questions[state.current_Question_Index].incorrectAnswers.concat(questions[state.current_Question_Index].correctAnswer).sort()\n})), on(QuizActions.setCurrentQuestion, (state, {\n  question,\n  index\n}) => ({\n  ...state,\n  current_Question_Index: index,\n  currentQuestion: question\n})), on(QuizActions.nextQuestion, state => {\n  const nextIndex = state.current_Question_Index + 1;\n  return {\n    ...state,\n    current_Question_Index: nextIndex,\n    currentQuestion: state.questions[nextIndex]?.question.text\n  };\n}), on(QuizActions.skipQuestion, state => {\n  const nextIndex = state.current_Question_Index + 1;\n  return {\n    ...state,\n    current_Question_Index: nextIndex,\n    currentQuestion: state.questions[nextIndex]?.question.text\n  };\n}), on(QuizActions.previousQuestion, state => {\n  const previousIndex = state.current_Question_Index - 1;\n  // const nextIndex = state.current_Question_Index + 1;\n  return {\n    ...state,\n    current_Question_Index: previousIndex,\n    currentQuestion: state.questions[previousIndex]?.question.text\n  };\n}), on(QuizActions.selectOption, (state, {\n  option\n}) => {\n  const userResponses = [...state.userResponses];\n  userResponses[state.current_Question_Index] = option;\n  return {\n    ...state,\n    selectedOption: option,\n    isOptionSelected: true,\n    selectedOptionClass: state.questions[state.current_Question_Index].correctAnswer === option ? 'correct-answer' : 'incorrect-answer',\n    correctAnswerClass: 'correct-answer',\n    userResponses\n  };\n}), on(QuizActions.updateScore, (state, {\n  score\n}) => {\n  return {\n    ...state,\n    current_score: state.current_score + score\n  };\n}), on(QuizActions.restartQuiz, () => initialState),\n//categories and all work related to form\non(QuizApiActions.loadCategoriesSuccess, (state, {\n  categories\n}) => {\n  // console.log('Categories received in reducer:', categories);\n  return {\n    ...state,\n    categories: categories\n  };\n}), on(QuizActions.setSelectedNumberOfQuestions, (state, {\n  selectedNumberOfQuestions\n}) => ({\n  ...state,\n  selectedNumberOfQuestions\n})), on(QuizActions.setSelectedCategory, (state, {\n  selectedCategory\n}) => ({\n  ...state,\n  selectedCategory\n})), on(QuizActions.setSelectedDifficulty, (state, {\n  selectedDifficulty\n}) => ({\n  ...state,\n  selectedDifficulty\n})));","map":{"version":3,"mappings":"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","names":["createReducer","on","QuizActions","QuizApiActions","QUIZ_APP_FEATURE_KEY","initialState","totalQuestions","current_score","total_score","questions","options","currentQuestion","current_Question_Index","selectedOption","isOptionSelected","selectedOptionClass","correctAnswerClass","userResponses","isFirstQuestion$","correctAnswer","categories","selectedNumberOfQuestions","selectedCategory","selectedDifficulty","quizAppReducer","loadQuestionsSuccess","state","length","question","text","incorrectAnswers","concat","sort","setCurrentQuestion","index","nextQuestion","nextIndex","skipQuestion","previousQuestion","previousIndex","selectOption","option","updateScore","score","restartQuiz","loadCategoriesSuccess","setSelectedNumberOfQuestions","setSelectedCategory","setSelectedDifficulty"],"sourceRoot":"","sources":["/Users/macbookpro/OneSchool/rxjs/redux-quiz/apps/quiz-redux-app/src/app/+state/quiz-app.reducer.ts"],"sourcesContent":["import { EntityState, EntityAdapter, createEntityAdapter } from '@ngrx/entity';\nimport { createReducer, on } from '@ngrx/store';\n\nimport { QuizActions } from './quiz-app.actions';\nimport { QuizApiActions } from './quiz-app.actions';\nimport { QuizAppEntity } from './quiz-app.models';\nimport { Quiz } from '../quiz/quiz.interface';\n\nexport const QUIZ_APP_FEATURE_KEY = 'quizApp';\n\nexport const initialState: Quiz = {\n  totalQuestions: 0,\n  current_score: 0,\n  total_score: 0,\n  questions: [],\n  options: [],\n  currentQuestion: '',\n  current_Question_Index: 0,\n  selectedOption: '',\n  isOptionSelected: false,\n  selectedOptionClass: '',\n  correctAnswerClass: '',\n  userResponses: [],\n  isFirstQuestion$: false,\n  correctAnswer: '',\n  categories: {},\n  selectedNumberOfQuestions: 0,\n  selectedCategory: '',\n  selectedDifficulty: '',\n};\n\nexport const quizAppReducer = createReducer(\n  initialState,\n\n  on(QuizApiActions.loadQuestionsSuccess, (state, { questions }) => ({\n    ...state,\n    questions: questions,\n    totalQuestions: questions.length,\n    currentQuestion: questions[state.current_Question_Index].question.text,\n    options: questions[state.current_Question_Index].incorrectAnswers\n      .concat(questions[state.current_Question_Index].correctAnswer)\n      .sort(),\n  })),\n  on(QuizActions.setCurrentQuestion, (state, { question, index }) => ({\n    ...state,\n    current_Question_Index: index,\n    currentQuestion: question,\n  })),\n\n  on(QuizActions.nextQuestion, (state) => {\n    const nextIndex = state.current_Question_Index + 1;\n\n    return {\n      ...state,\n      current_Question_Index: nextIndex,\n      currentQuestion: state.questions[nextIndex]?.question.text,\n    };\n  }),\n  on(QuizActions.skipQuestion, (state) => {\n    const nextIndex = state.current_Question_Index + 1;\n\n    return {\n      ...state,\n      current_Question_Index: nextIndex,\n      currentQuestion: state.questions[nextIndex]?.question.text,\n    };\n  }),\n  on(QuizActions.previousQuestion, (state) => {\n    const previousIndex = state.current_Question_Index - 1;\n    // const nextIndex = state.current_Question_Index + 1;\n\n    return {\n      ...state,\n      current_Question_Index: previousIndex,\n      currentQuestion: state.questions[previousIndex]?.question.text,\n    };\n  }),\n\n  on(QuizActions.selectOption, (state, { option }) => {\n    const userResponses = [...state.userResponses];\n    userResponses[state.current_Question_Index] = option;\n\n    return {\n      ...state,\n      selectedOption: option,\n      isOptionSelected: true,\n      selectedOptionClass:\n        state.questions[state.current_Question_Index].correctAnswer === option\n          ? 'correct-answer'\n          : 'incorrect-answer',\n      correctAnswerClass: 'correct-answer',\n      userResponses,\n    };\n  }),\n  on(QuizActions.updateScore, (state, { score }) => {\n    return { ...state, current_score: state.current_score + score };\n  }),\n\n  on(QuizActions.restartQuiz, () => initialState),\n\n  //categories and all work related to form\n  on(QuizApiActions.loadCategoriesSuccess, (state, { categories }) => {\n    // console.log('Categories received in reducer:', categories);\n    return {\n      ...state,\n      categories: categories,\n    };\n  }),\n  on(\n    QuizActions.setSelectedNumberOfQuestions,\n    (state, { selectedNumberOfQuestions }) => ({\n      ...state,\n      selectedNumberOfQuestions,\n    })\n  ),\n  on(QuizActions.setSelectedCategory, (state, { selectedCategory }) => ({\n    ...state,\n    selectedCategory,\n  })),\n  on(QuizActions.setSelectedDifficulty, (state, { selectedDifficulty }) => ({\n    ...state,\n    selectedDifficulty,\n  }))\n);\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}