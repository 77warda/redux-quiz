{"ast":null,"code":"import { createReducer, on } from '@ngrx/store';\nimport { QuizActions } from './quiz-app.actions';\nexport const QUIZ_APP_FEATURE_KEY = 'quizApp';\nexport const initialState = {\n  totalQuestions: 0,\n  current_score: 0,\n  total_score: 0,\n  questions: [],\n  options: [],\n  currentQuestion: '',\n  current_Question_Index: 0,\n  selectedResponses: {}\n};\nexport const quizAppReducer = createReducer(initialState, on(QuizActions.loadQuestionsSuccess, (state, {\n  questions\n}) => ({\n  ...state,\n  questions\n})), on(QuizActions.selectOption, (state, {\n  option\n}) => ({\n  ...state,\n  selectedOption: option,\n  isOptionSelected: true,\n  selectedOptionClass: state.questions[state.current_Question_Index].correctAnswer === option ? 'correct-answer' : 'incorrect-answer',\n  correctAnswerClass: 'correct-answer'\n})), on(QuizActions.nextQuestion, state => {\n  const nextIndex = state.current_Question_Index + 1;\n  return {\n    ...state,\n    current_Question_Index: nextIndex,\n    currentQuestion: state.questions[nextIndex]?.question,\n    options: state.questions[nextIndex]?.options\n  };\n}), on(QuizActions.skipQuestion, state => {\n  const nextIndex = state.current_Question_Index + 1;\n  return {\n    ...state,\n    current_Question_Index: nextIndex,\n    currentQuestion: state.questions[nextIndex]?.question,\n    options: state.questions[nextIndex]?.options\n  };\n}), on(QuizActions.previousQuestion, state => {\n  const newIndex = Math.max(0, state.current_Question_Index - 1);\n  return {\n    ...state,\n    current_Question_Index: newIndex\n  };\n}), on(QuizActions.updateScore, (state, {\n  score\n}) => {\n  return {\n    ...state,\n    current_score: state.current_score + score\n  };\n}), on(QuizActions.restartQuiz, () => initialState), on(QuizActions.updateSelectedResponses, (state, {\n  selectedResponses\n}) => {\n  return {\n    ...state,\n    selectedResponses: {\n      ...state.selectedResponses,\n      ...selectedResponses\n    }\n  };\n}));","map":{"version":3,"mappings":"AACA,SAASA,aAAa,EAAEC,EAAE,QAAQ,aAAa;AAE/C,SAASC,WAAW,QAAQ,oBAAoB;AAIhD,OAAO,MAAMC,oBAAoB,GAAG,SAAS;AAE7C,OAAO,MAAMC,YAAY,GAAS;EAChCC,cAAc,EAAE,CAAC;EACjBC,aAAa,EAAE,CAAC;EAChBC,WAAW,EAAE,CAAC;EACdC,SAAS,EAAE,EAAE;EACbC,OAAO,EAAE,EAAE;EACXC,eAAe,EAAE,EAAE;EACnBC,sBAAsB,EAAE,CAAC;EACzBC,iBAAiB,EAAE;CACpB;AAED,OAAO,MAAMC,cAAc,GAAGb,aAAa,CACzCI,YAAY,EACZH,EAAE,CAACC,WAAW,CAACY,oBAAoB,EAAE,CAACC,KAAK,EAAE;EAAEP;AAAS,CAAE,MAAM;EAC9D,GAAGO,KAAK;EACRP;CACD,CAAC,CAAC,EAEHP,EAAE,CAACC,WAAW,CAACc,YAAY,EAAE,CAACD,KAAK,EAAE;EAAEE;AAAM,CAAE,MAAM;EACnD,GAAGF,KAAK;EACRG,cAAc,EAAED,MAAM;EACtBE,gBAAgB,EAAE,IAAI;EACtBC,mBAAmB,EACjBL,KAAK,CAACP,SAAS,CAACO,KAAK,CAACJ,sBAAsB,CAAC,CAACU,aAAa,KAAKJ,MAAM,GAClE,gBAAgB,GAChB,kBAAkB;EACxBK,kBAAkB,EAAE;CACrB,CAAC,CAAC,EAEHrB,EAAE,CAACC,WAAW,CAACqB,YAAY,EAAGR,KAAK,IAAI;EACrC,MAAMS,SAAS,GAAGT,KAAK,CAACJ,sBAAsB,GAAG,CAAC;EAElD,OAAO;IACL,GAAGI,KAAK;IACRJ,sBAAsB,EAAEa,SAAS;IACjCd,eAAe,EAAEK,KAAK,CAACP,SAAS,CAACgB,SAAS,CAAC,EAAEC,QAAQ;IACrDhB,OAAO,EAAEM,KAAK,CAACP,SAAS,CAACgB,SAAS,CAAC,EAAEf;GACtC;AACH,CAAC,CAAC,EACFR,EAAE,CAACC,WAAW,CAACwB,YAAY,EAAGX,KAAK,IAAI;EACrC,MAAMS,SAAS,GAAGT,KAAK,CAACJ,sBAAsB,GAAG,CAAC;EAElD,OAAO;IACL,GAAGI,KAAK;IACRJ,sBAAsB,EAAEa,SAAS;IACjCd,eAAe,EAAEK,KAAK,CAACP,SAAS,CAACgB,SAAS,CAAC,EAAEC,QAAQ;IACrDhB,OAAO,EAAEM,KAAK,CAACP,SAAS,CAACgB,SAAS,CAAC,EAAEf;GACtC;AACH,CAAC,CAAC,EACFR,EAAE,CAACC,WAAW,CAACyB,gBAAgB,EAAGZ,KAAK,IAAI;EACzC,MAAMa,QAAQ,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEf,KAAK,CAACJ,sBAAsB,GAAG,CAAC,CAAC;EAC9D,OAAO;IAAE,GAAGI,KAAK;IAAEJ,sBAAsB,EAAEiB;EAAQ,CAAE;AACvD,CAAC,CAAC,EAEF3B,EAAE,CAACC,WAAW,CAAC6B,WAAW,EAAE,CAAChB,KAAK,EAAE;EAAEiB;AAAK,CAAE,KAAI;EAC/C,OAAO;IAAE,GAAGjB,KAAK;IAAET,aAAa,EAAES,KAAK,CAACT,aAAa,GAAG0B;EAAK,CAAE;AACjE,CAAC,CAAC,EAEF/B,EAAE,CAACC,WAAW,CAAC+B,WAAW,EAAE,MAAM7B,YAAY,CAAC,EAE/CH,EAAE,CAACC,WAAW,CAACgC,uBAAuB,EAAE,CAACnB,KAAK,EAAE;EAAEH;AAAiB,CAAE,KAAI;EACvE,OAAO;IACL,GAAGG,KAAK;IACRH,iBAAiB,EAAE;MAAE,GAAGG,KAAK,CAACH,iBAAiB;MAAE,GAAGA;IAAiB;GACtE;AACH,CAAC,CAAC,CACH","names":["createReducer","on","QuizActions","QUIZ_APP_FEATURE_KEY","initialState","totalQuestions","current_score","total_score","questions","options","currentQuestion","current_Question_Index","selectedResponses","quizAppReducer","loadQuestionsSuccess","state","selectOption","option","selectedOption","isOptionSelected","selectedOptionClass","correctAnswer","correctAnswerClass","nextQuestion","nextIndex","question","skipQuestion","previousQuestion","newIndex","Math","max","updateScore","score","restartQuiz","updateSelectedResponses"],"sourceRoot":"","sources":["/Users/macbookpro/OneSchool/rxjs/redux-quiz/apps/quiz-redux-app/src/app/+state/quiz-app.reducer.ts"],"sourcesContent":["import { EntityState, EntityAdapter, createEntityAdapter } from '@ngrx/entity';\nimport { createReducer, on } from '@ngrx/store';\n\nimport { QuizActions } from './quiz-app.actions';\nimport { QuizAppEntity } from './quiz-app.models';\nimport { Quiz } from '../quiz/quiz.interface';\n\nexport const QUIZ_APP_FEATURE_KEY = 'quizApp';\n\nexport const initialState: Quiz = {\n  totalQuestions: 0,\n  current_score: 0,\n  total_score: 0,\n  questions: [],\n  options: [],\n  currentQuestion: '',\n  current_Question_Index: 0,\n  selectedResponses: {},\n};\n\nexport const quizAppReducer = createReducer(\n  initialState,\n  on(QuizActions.loadQuestionsSuccess, (state, { questions }) => ({\n    ...state,\n    questions,\n  })),\n\n  on(QuizActions.selectOption, (state, { option }) => ({\n    ...state,\n    selectedOption: option,\n    isOptionSelected: true,\n    selectedOptionClass:\n      state.questions[state.current_Question_Index].correctAnswer === option\n        ? 'correct-answer'\n        : 'incorrect-answer',\n    correctAnswerClass: 'correct-answer',\n  })),\n\n  on(QuizActions.nextQuestion, (state) => {\n    const nextIndex = state.current_Question_Index + 1;\n\n    return {\n      ...state,\n      current_Question_Index: nextIndex,\n      currentQuestion: state.questions[nextIndex]?.question,\n      options: state.questions[nextIndex]?.options,\n    };\n  }),\n  on(QuizActions.skipQuestion, (state) => {\n    const nextIndex = state.current_Question_Index + 1;\n\n    return {\n      ...state,\n      current_Question_Index: nextIndex,\n      currentQuestion: state.questions[nextIndex]?.question,\n      options: state.questions[nextIndex]?.options,\n    };\n  }),\n  on(QuizActions.previousQuestion, (state) => {\n    const newIndex = Math.max(0, state.current_Question_Index - 1);\n    return { ...state, current_Question_Index: newIndex };\n  }),\n\n  on(QuizActions.updateScore, (state, { score }) => {\n    return { ...state, current_score: state.current_score + score };\n  }),\n\n  on(QuizActions.restartQuiz, () => initialState),\n\n  on(QuizActions.updateSelectedResponses, (state, { selectedResponses }) => {\n    return {\n      ...state,\n      selectedResponses: { ...state.selectedResponses, ...selectedResponses },\n    };\n  })\n);\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}